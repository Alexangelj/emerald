{
  "contractName": "Account",
  "abi": [
    {
      "name": "Error",
      "inputs": [
        {
          "type": "string",
          "name": "message",
          "indexed": false
        }
      ],
      "anonymous": false,
      "type": "event"
    },
    {
      "name": "AccountCreated",
      "inputs": [
        {
          "type": "address",
          "name": "user",
          "indexed": true
        },
        {
          "type": "address",
          "name": "userAcc",
          "indexed": true
        },
        {
          "type": "bool",
          "name": "outcome",
          "indexed": false
        }
      ],
      "anonymous": false,
      "type": "event"
    },
    {
      "name": "AccountAuthorized",
      "inputs": [
        {
          "type": "address",
          "name": "user",
          "indexed": true
        },
        {
          "type": "address",
          "name": "userAcc",
          "indexed": true
        },
        {
          "type": "bool",
          "name": "outcome",
          "indexed": false
        }
      ],
      "anonymous": false,
      "type": "event"
    },
    {
      "name": "AccountDeposit",
      "inputs": [
        {
          "type": "address",
          "name": "user",
          "indexed": true
        },
        {
          "type": "address",
          "name": "userAcc",
          "indexed": true
        },
        {
          "type": "uint256",
          "name": "amount",
          "indexed": false,
          "unit": "wei"
        },
        {
          "type": "bool",
          "name": "outcome",
          "indexed": false
        }
      ],
      "anonymous": false,
      "type": "event"
    },
    {
      "name": "AccountWithdrawal",
      "inputs": [
        {
          "type": "address",
          "name": "user",
          "indexed": true
        },
        {
          "type": "address",
          "name": "userAcc",
          "indexed": true
        },
        {
          "type": "uint256",
          "name": "amount",
          "indexed": false,
          "unit": "wei"
        },
        {
          "type": "bool",
          "name": "outcome",
          "indexed": false
        }
      ],
      "anonymous": false,
      "type": "event"
    },
    {
      "name": "setup",
      "outputs": [],
      "inputs": [
        {
          "type": "address",
          "name": "user_addr"
        }
      ],
      "constant": false,
      "payable": false,
      "type": "function",
      "gas": 107991
    },
    {
      "name": "authorize",
      "outputs": [
        {
          "type": "bool",
          "name": "out"
        }
      ],
      "inputs": [
        {
          "type": "address",
          "name": "userAcc"
        }
      ],
      "constant": false,
      "payable": false,
      "type": "function",
      "gas": 37847
    },
    {
      "name": "deposit",
      "outputs": [
        {
          "type": "bool",
          "name": "out"
        }
      ],
      "inputs": [
        {
          "type": "address",
          "name": "addr"
        }
      ],
      "constant": false,
      "payable": true,
      "type": "function",
      "gas": 12774
    },
    {
      "name": "withdraw",
      "outputs": [
        {
          "type": "bool",
          "name": "out"
        }
      ],
      "inputs": [
        {
          "type": "uint256",
          "unit": "wei",
          "name": "amount"
        }
      ],
      "constant": false,
      "payable": false,
      "type": "function",
      "gas": 45690
    },
    {
      "name": "userAddress",
      "outputs": [
        {
          "type": "address",
          "name": "out"
        }
      ],
      "inputs": [],
      "constant": true,
      "payable": false,
      "type": "function",
      "gas": 671
    },
    {
      "name": "factoryAddress",
      "outputs": [
        {
          "type": "address",
          "name": "out"
        }
      ],
      "inputs": [],
      "constant": true,
      "payable": false,
      "type": "function",
      "gas": 701
    },
    {
      "name": "ownerAddress",
      "outputs": [
        {
          "type": "address",
          "name": "out"
        }
      ],
      "inputs": [],
      "constant": true,
      "payable": false,
      "type": "function",
      "gas": 731
    },
    {
      "name": "authorizedAccount",
      "outputs": [
        {
          "type": "bool",
          "name": "out"
        }
      ],
      "inputs": [
        {
          "type": "address",
          "name": "userAcc_addr"
        }
      ],
      "constant": true,
      "payable": false,
      "type": "function",
      "gas": 915
    },
    {
      "name": "accountBalance",
      "outputs": [
        {
          "type": "uint256",
          "unit": "wei",
          "name": "out"
        }
      ],
      "inputs": [],
      "constant": true,
      "payable": false,
      "type": "function",
      "gas": 990
    },
    {
      "name": "authorized",
      "outputs": [
        {
          "type": "bool",
          "name": "out"
        }
      ],
      "inputs": [
        {
          "type": "address",
          "name": "arg0"
        }
      ],
      "constant": true,
      "payable": false,
      "type": "function",
      "gas": 975
    },
    {
      "name": "owner",
      "outputs": [
        {
          "type": "address",
          "name": "out"
        }
      ],
      "inputs": [],
      "constant": true,
      "payable": false,
      "type": "function",
      "gas": 851
    }
  ],
  "bytecode": "0x6106aa56600436101561000d576106a0565b600035601c52740100000000000000000000000000000000000000006020526f7fffffffffffffffffffffffffffffff6040527fffffffffffffffffffffffffffffffff8000000000000000000000000000000060605274012a05f1fffffffffffffffffffffffffdabf41c006080527ffffffffffffffffffffffffed5fa0e000000000000000000000000000000000060a0526366d3820360005114156101295734156100ba57600080fd5b60043560205181106100cb57600080fd5b5060006004351415600454156002541516166100e657600080fd5b33600255600435600455600435600355600161014052306004357f1a249674a89ca8f31d0561aed4ccbaf4a366633ec7deb6d724a94970763424da6020610140a3005b63b6a5d7de60005114156101a757341561014257600080fd5b600435602051811061015357600080fd5b506001600160043560e05260c052604060c020556001610140526004356002547f31b0379890007b62e73ee4db4531159d8d00428b2426e3942589e1b604d82e8d6020610140a3600160005260206000f350005b63f340fa0160005114156103a35760043560205181106101c657600080fd5b503461014052600161016052600435337f349bb09fb300a1c8e15ca4fc19e013dd03a253f76abdb743000959fcb99a0d456040610140a3600160043560e05260c052604060c020541561025857346102c05260016102e052600435337f349bb09fb300a1c8e15ca4fc19e013dd03a253f76abdb743000959fcb99a0d4560406102c0a3600160005260206000f3610396565b601a610180527f4465706f736974206d75737420626520617574686f72697a65640000000000006101a0526101808051602001806101e0828460006004600a8704601201f16102a657600080fd5b5050602061026052610260516102a0526101e0805160200180610260516102a001828460006004600a8704601201f16102de57600080fd5b5050610260516102a0015160206001820306601f8201039050610240610260516102a001516020818352015b826102405110151561031b5761033c565b600061024051610260516102c00101535b815160010180835281141561030a575b5050506020610260516102a0015160206001820306601f8201039050610260510101610260527f08c379a0afcc32b1a39302f7cb8073359698411ab5fd6e3edb2c02c0b5fba8aa610260516102a0a1600060005260206000f35b600060005260206000f350005b632e1a7d4d600051141561054f5734156103bc57600080fd5b3031600435111561050557600f610140527f457863656564732062616c616e63650000000000000000000000000000000000610160526101408051602001806101a0828460006004600a8704601201f161041557600080fd5b505060206102205261022051610260526101a08051602001806102205161026001828460006004600a8704601201f161044d57600080fd5b505061022051610260015160206001820306601f82010390506102006102205161026001516020818352015b826102005110151561048a576104ab565b600061020051610220516102800101535b8151600101808352811415610479575b505050602061022051610260015160206001820306601f8201039050610220510101610220527f08c379a0afcc32b1a39302f7cb8073359698411ab5fd6e3edb2c02c0b5fba8aa61022051610260a1600060005260206000f35b60013360e05260c052604060c0205460035433141715610542576000600060006000600435336000f161053757600080fd5b600160005260206000f35b600060005260206000f350005b63e4128fb3600051141561057657341561056857600080fd5b60045460005260206000f350005b63966dae0e600051141561059d57341561058f57600080fd5b60025460005260206000f350005b638f84aa0960005114156105c45734156105b657600080fd5b60035460005260206000f350005b6353243616600051141561060b5734156105dd57600080fd5b60043560205181106105ee57600080fd5b50600160043560e05260c052604060c0205460005260206000f350005b63b0a1c1c4600051141561063157341561062457600080fd5b303160005260206000f350005b63b9181611600051141561067857341561064a57600080fd5b600435602051811061065b57600080fd5b50600160043560e05260c052604060c0205460005260206000f350005b638da5cb5b600051141561069f57341561069157600080fd5b60035460005260206000f350005b5b60006000fd5b6100046106aa036100046000396100046106aa036000f3",
  "deployedBytecode": "0x600436101561000d576106a0565b600035601c52740100000000000000000000000000000000000000006020526f7fffffffffffffffffffffffffffffff6040527fffffffffffffffffffffffffffffffff8000000000000000000000000000000060605274012a05f1fffffffffffffffffffffffffdabf41c006080527ffffffffffffffffffffffffed5fa0e000000000000000000000000000000000060a0526366d3820360005114156101295734156100ba57600080fd5b60043560205181106100cb57600080fd5b5060006004351415600454156002541516166100e657600080fd5b33600255600435600455600435600355600161014052306004357f1a249674a89ca8f31d0561aed4ccbaf4a366633ec7deb6d724a94970763424da6020610140a3005b63b6a5d7de60005114156101a757341561014257600080fd5b600435602051811061015357600080fd5b506001600160043560e05260c052604060c020556001610140526004356002547f31b0379890007b62e73ee4db4531159d8d00428b2426e3942589e1b604d82e8d6020610140a3600160005260206000f350005b63f340fa0160005114156103a35760043560205181106101c657600080fd5b503461014052600161016052600435337f349bb09fb300a1c8e15ca4fc19e013dd03a253f76abdb743000959fcb99a0d456040610140a3600160043560e05260c052604060c020541561025857346102c05260016102e052600435337f349bb09fb300a1c8e15ca4fc19e013dd03a253f76abdb743000959fcb99a0d4560406102c0a3600160005260206000f3610396565b601a610180527f4465706f736974206d75737420626520617574686f72697a65640000000000006101a0526101808051602001806101e0828460006004600a8704601201f16102a657600080fd5b5050602061026052610260516102a0526101e0805160200180610260516102a001828460006004600a8704601201f16102de57600080fd5b5050610260516102a0015160206001820306601f8201039050610240610260516102a001516020818352015b826102405110151561031b5761033c565b600061024051610260516102c00101535b815160010180835281141561030a575b5050506020610260516102a0015160206001820306601f8201039050610260510101610260527f08c379a0afcc32b1a39302f7cb8073359698411ab5fd6e3edb2c02c0b5fba8aa610260516102a0a1600060005260206000f35b600060005260206000f350005b632e1a7d4d600051141561054f5734156103bc57600080fd5b3031600435111561050557600f610140527f457863656564732062616c616e63650000000000000000000000000000000000610160526101408051602001806101a0828460006004600a8704601201f161041557600080fd5b505060206102205261022051610260526101a08051602001806102205161026001828460006004600a8704601201f161044d57600080fd5b505061022051610260015160206001820306601f82010390506102006102205161026001516020818352015b826102005110151561048a576104ab565b600061020051610220516102800101535b8151600101808352811415610479575b505050602061022051610260015160206001820306601f8201039050610220510101610220527f08c379a0afcc32b1a39302f7cb8073359698411ab5fd6e3edb2c02c0b5fba8aa61022051610260a1600060005260206000f35b60013360e05260c052604060c0205460035433141715610542576000600060006000600435336000f161053757600080fd5b600160005260206000f35b600060005260206000f350005b63e4128fb3600051141561057657341561056857600080fd5b60045460005260206000f350005b63966dae0e600051141561059d57341561058f57600080fd5b60025460005260206000f350005b638f84aa0960005114156105c45734156105b657600080fd5b60035460005260206000f350005b6353243616600051141561060b5734156105dd57600080fd5b60043560205181106105ee57600080fd5b50600160043560e05260c052604060c0205460005260206000f350005b63b0a1c1c4600051141561063157341561062457600080fd5b303160005260206000f350005b63b9181611600051141561067857341561064a57600080fd5b600435602051811061065b57600080fd5b50600160043560e05260c052604060c0205460005260206000f350005b638da5cb5b600051141561069f57341561069157600080fd5b60035460005260206000f350005b5b60006000fd",
  "source": "# @notice Accounts created mint tokens at a 1:1 ratio to ether which are then authorized to trade the option\r\n# @author Alexander\r\n\r\ncontract Factory():\r\n    def getAccount(user_addr: address) -> address:constant\r\n    def getUser(userAcc: address) -> address:constant\r\n\r\nError: event({message: string[50]})\r\nAccountCreated: event({user: indexed(address), userAcc: indexed(address), outcome: bool})\r\nAccountAuthorized: event({user: indexed(address), userAcc: indexed(address), outcome: bool})\r\nAccountDeposit: event({user: indexed(address), userAcc: indexed(address), amount: wei_value, outcome: bool})\r\nAccountWithdrawal: event({user: indexed(address), userAcc: indexed(address), amount: wei_value, outcome: bool})\r\n\r\naccounts: map(address, address)\r\nauthorized: public(map(address, bool))\r\nfactory: Factory\r\nowner: public(address)\r\nuser: address\r\n\r\n\r\n@public\r\ndef setup(user_addr: address):\r\n    assert(self.factory == ZERO_ADDRESS and self.user == ZERO_ADDRESS) and user_addr != ZERO_ADDRESS\r\n    self.factory = Factory(msg.sender)\r\n    self.user = user_addr\r\n    self.owner = user_addr\r\n    log.AccountCreated(user_addr, self, True)\r\n\r\n@public\r\ndef authorize(userAcc: address) -> bool:\r\n    self.authorized[userAcc] = True\r\n    log.AccountAuthorized(self.factory, userAcc, True)\r\n    return True\r\n\r\n@public\r\n@payable\r\ndef deposit( addr: address) -> bool:\r\n    log.AccountDeposit(msg.sender, addr, msg.value, True)\r\n    if(self.authorized[addr]):\r\n        log.AccountDeposit(msg.sender, addr, msg.value, True)\r\n        return True\r\n    else:\r\n        log.Error('Deposit must be authorized')\r\n        return False\r\n    return False\r\n\r\n@public\r\ndef withdraw(amount: wei_value) -> bool:\r\n    if(amount > self.balance):\r\n        log.Error('Exceeds balance')\r\n        return False\r\n    if(msg.sender == self.owner or self.authorized[msg.sender]):\r\n        send(msg.sender, amount)\r\n        return True\r\n    return False\r\n\r\n\r\n@public\r\n@constant\r\ndef userAddress() -> address:\r\n    return self.user\r\n\r\n@public\r\n@constant\r\ndef factoryAddress() -> address:\r\n    return self.factory\r\n\r\n@public\r\n@constant \r\ndef ownerAddress() -> address:\r\n    return self.owner\r\n\r\n@public\r\n@constant\r\ndef authorizedAccount(userAcc_addr: address) -> bool:\r\n    return self.authorized[userAcc_addr]\r\n \r\n@public\r\n@constant\r\ndef accountBalance() -> wei_value:\r\n    return self.balance\r\n\r\n    ",
  "sourcePath": "C:/Users/alexa/OneDrive/Documents/Master/Blockchain/Projects/Emerald_Project/contracts/Account.vy",
  "compiler": {
    "name": "vyper",
    "version": "0.1.0b13+commit.375fb27"
  },
  "networks": {
    "5777": {
      "events": {
        "0x08c379a0afcc32b1a39302f7cb8073359698411ab5fd6e3edb2c02c0b5fba8aa": {
          "name": "Error",
          "inputs": [
            {
              "type": "string",
              "name": "message",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event",
          "signature": "0x08c379a0afcc32b1a39302f7cb8073359698411ab5fd6e3edb2c02c0b5fba8aa"
        },
        "0x1a249674a89ca8f31d0561aed4ccbaf4a366633ec7deb6d724a94970763424da": {
          "name": "AccountCreated",
          "inputs": [
            {
              "type": "address",
              "name": "user",
              "indexed": true
            },
            {
              "type": "address",
              "name": "userAcc",
              "indexed": true
            },
            {
              "type": "bool",
              "name": "outcome",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event",
          "signature": "0x1a249674a89ca8f31d0561aed4ccbaf4a366633ec7deb6d724a94970763424da"
        },
        "0x31b0379890007b62e73ee4db4531159d8d00428b2426e3942589e1b604d82e8d": {
          "name": "AccountAuthorized",
          "inputs": [
            {
              "type": "address",
              "name": "user",
              "indexed": true
            },
            {
              "type": "address",
              "name": "userAcc",
              "indexed": true
            },
            {
              "type": "bool",
              "name": "outcome",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event",
          "signature": "0x31b0379890007b62e73ee4db4531159d8d00428b2426e3942589e1b604d82e8d"
        },
        "0x349bb09fb300a1c8e15ca4fc19e013dd03a253f76abdb743000959fcb99a0d45": {
          "name": "AccountDeposit",
          "inputs": [
            {
              "type": "address",
              "name": "user",
              "indexed": true
            },
            {
              "type": "address",
              "name": "userAcc",
              "indexed": true
            },
            {
              "type": "uint256",
              "name": "amount",
              "indexed": false,
              "unit": "wei"
            },
            {
              "type": "bool",
              "name": "outcome",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event",
          "signature": "0x349bb09fb300a1c8e15ca4fc19e013dd03a253f76abdb743000959fcb99a0d45"
        },
        "0x9c4355125b9f682b86853a9e5ac6680bc1ede3ab7dae57a7b7d1f4d1fc17b96d": {
          "name": "AccountWithdrawal",
          "inputs": [
            {
              "type": "address",
              "name": "user",
              "indexed": true
            },
            {
              "type": "address",
              "name": "userAcc",
              "indexed": true
            },
            {
              "type": "uint256",
              "name": "amount",
              "indexed": false,
              "unit": "wei"
            },
            {
              "type": "bool",
              "name": "outcome",
              "indexed": false
            }
          ],
          "anonymous": false,
          "type": "event",
          "signature": "0x9c4355125b9f682b86853a9e5ac6680bc1ede3ab7dae57a7b7d1f4d1fc17b96d"
        }
      },
      "links": {},
      "address": "0x858Ec2127182A03f62fd78a5c5BE6e3680Df1D80",
      "transactionHash": "0xa23320bf94e5f8456aecb747bbd1feba51d1d764737326d433de0e57e676eb3a"
    }
  },
  "schemaVersion": "3.0.17",
  "updatedAt": "2019-11-08T17:21:04.571Z",
  "networkType": "ethereum"
}